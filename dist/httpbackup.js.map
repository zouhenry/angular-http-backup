{"version":3,"sources":["webpack:///webpack/bootstrap bf1f87615372e2d60dae","webpack:///./src/httpbackup.module.js","webpack:///./src/httpbackup.interceptor.js"],"names":["angular","module","factory","HttpBackupInterceptor","$q","response","responseError","window","localStorage","setItem","config","url","JSON","stringify","data","getItem","parse","console","warn","resolve","ex","reject"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAUA;;AANA,KAAI,eAAe,uBAAuB;;AAE1C,UAAS,uBAAuB,KAAK,EAAE,OAAO,OAAO,IAAI,aAAa,MAAM,EAAE,SAAS;;AAMvFA,SAAQC,OAAQ,cAAc,IAC3BC,QAAS,yBADZ;;;;;;;;;;;;;;ACZA;;;AAEA,QAAO,eAAe,SAAS,cAAc;GAC3C,OAAO;;;;;;AAMT,SAAQ,UALOC;;;;AAGf,UAASA,sBAAuBC,IAAK;;GAEnC,OAAO;KACLC,UAAeA;KACfC,eAAeA;;;GAGjB,SAASD,SAAUA,UAAW;;KAE5BE,OAAOC,aAAaC,QAASJ,SAASK,OAAOC,KAAKC,KAAKC,UAAWR;KAClE,OAAOA;;;GAGT,SAASC,cAAeD,UAAW;KACjC,IAAIS,OAAOP,OAAOC,aAAaO,QAASV,SAASK,OAAOC;KACxD,IAAKG,MAAO;;OACV,IAAI;;SAEFA,OAAOF,KAAKI,MAAOF;SACnBG,QAAQC,KAAM,wBAAwBb,SAASK,OAAOC;SACtD,OAAOP,GAAGe,QAASL;SACnB,OAAQM,IAAK;SACb,OAAOhB,GAAGiB,OAAQhB;;YAEf;OACL,OAAOD,GAAGiB,OAAQhB","file":"httpbackup.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bf1f87615372e2d60dae\n **/","/**\n * Created by Henry Zou on 10/7/2016.\n *\n *\n * USAGE:\n * In the config block, register the Interceptor\n * $httpProvider.interceptors.push( 'HttpBackupInterceptor' );\n *\n */\n\nimport httpbackupInterceptor from './httpbackup.interceptor';\n\nangular.module( 'httpbackup', [] )\n  .factory( 'HttpBackupInterceptor', httpbackupInterceptor );\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/httpbackup.module.js\n **/","/**\n * Saves previously successful ajax requests in localStorage and replays them back when thereâ€™s server response fails/network error\n */\n\nexport default HttpBackupInterceptor;\n\n/* @ngInject */\nfunction HttpBackupInterceptor( $q ) {\n\n  return {\n    response     : response,\n    responseError: responseError\n  };\n\n  function response( response ) {\n    // for every successful request, cache the response\n    window.localStorage.setItem( response.config.url, JSON.stringify( response ) );\n    return response;\n  }\n\n  function responseError( response ) {\n    var data = window.localStorage.getItem( response.config.url );\n    if ( data ) { //if response fails and there's cached data\n      try {\n        // use cached data\n        data = JSON.parse( data );\n        console.warn( 'using offline cache:', response.config.url );\n        return $q.resolve( data );\n      } catch ( ex ) {\n        return $q.reject( response );\n      }\n    } else {\n      return $q.reject( response );\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/httpbackup.interceptor.js\n **/"],"sourceRoot":""}